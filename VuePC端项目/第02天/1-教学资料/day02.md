## PC-day02

### 1.0 概述

#### 1.1 复习

+ 开发模式：
  + 混合式开发
    + 前端
      + 书写静态文件
    + 后端
      + 书写逻辑代码
      + 动态获取数据
      + 渲染数据
  + 前后端分离
    + 前端
      + 根据美工的设计图完成静态页面
      + 根据接口文档来渲染数据
    + 后端
      + 根据接口文档去开发接口
+ 设计思想：
  + MVC
    + M: model
    + V:  views
    + C: controller
    + 特点：
      + M ---> V ---> C ---> M
  + MVVM
    + M: model
    + V:  views
    + VM: viewsmodel
    + 特点：
      + M ---> VM ---> V
      + V  ---> VM ----> M
      + 数据驱动视图
      + 数据的双向绑定
    + vue
    + angular
    + react
+ PC端的项目
  + 项目准备：
    + 在公司中一个项目的完整流程
    + 前端开发时需要的准备材料
      + 界面的设计图
      + 开发接口文档
    + 使用的技术栈
      + html
      + css
      + js
      + vue.js
  + 项目开发
    + 项目结构的搭建
      + 使用 vue-cli 来搭建项目结构
        + 以前步骤：
          + vue create project ----> default ----> 自动生成一个项目
        + 使用了最新的步骤
          + vue create project 
          + Manually select features
            + Bable
            + LESS 
            + ESLinter
            + Router
            + Vuex
          + 启动项目
            + npm run serve
        + ESLinter的语法规范
          + 句末不能加分号
          + 句末不能有空格
          + 缩进使用两个空格
          + .....
          + 注意点：
            + 如果语法错误太多不会解决可以使用指令：
            + npm run lint --fix 来自修复语法
              + 可以修复语法的错误
              + 无法删除冗余的变量
        + 造项目结构
          + 将所有不需要的文件删除
        + element-ui
          + 是什么：
            + 基本于 vue2.0 的 PC 端组件库，可以用来帮助我们搭建一个项目结构
          + 怎么用：
            + 下载
              + npm i element-ui -S
              + -S 将当前依赖项保存到 package.json 中
              + 将来进行 npm install 时，可以再次下载
            + 引用
              + 引入 vue
              + 引入 element-ui 的 js 文件
              + 引入 element-ui  的 css 文件
              + Vue.use(ElementUI)
            + 使用：
              + 找到自己想的组件
                + 复制结构代码
                + 复制 js 代码

#### 1.2 今日内容

+ 项目的登录页面
  + 修改项目的图标
  + 完成登录页面的结构样式
  + 填写登录信息
    + 验证用户的登录信息
  + 完成登录逻辑

### 2.0 PC端项目-开始

#### 2.1 搭建项目结构

+ 生成项目的选项
+ 其它选项
+ 项目结构
+ 改造项目结构
+ ESLint 的语法规范
+ element-ui
+ 使用 git 管理项目

#### 2.2 完成登录页面

##### 2.2.1 修改项目的图标

+ 步骤：
  + 找到资源图片
  + 将图片放到指定的目录下
    + public ----> public
    + assets ----> assets

##### 2.2.2 创建两个页面：登录页面 & 主页

+ 分析结果
  + 进入项目时
    - 登录页面
  + 登录成功
    - 跳转到主页 index
+ 步骤：
  + 创建了两个组件：登录 & 主页
  + 分别给组件添加路由
  + 将 根目录的 路由跳转到主页
    + 路由的重定向

##### 2.2.3 完成登录页面的样式

+ 步骤：
  + 1.0 在页面上添加表单元素
  + 2.0 添加样式，改造界面

##### 2.2.4 数据的验证

+ 步骤：
  + 失去焦点的验证
    + 1.0 添加验证规则：rules
      - 定义规则
      - 给 form 设置规则
    + 2.0 给 form-item 设置 prop 属性来使用规则
  + 点击登录按钮的验证
    + 1.0 给登录按钮绑定一个点击事件
    + 2.0 在事件中得到 el-form 元素
    + 3.0 调用元素的方法： validate
      + 判断是否验证通过

##### 2.2.5 将数据提交到服务器

+ 步骤：
  + 1.0 在输入框中输入手机号&验证码
  + 2.0 点击登录按钮将数据提交到服务器接口中
    + 接口API：
      + url：http://ttapi.research.itcast.cn/mp/v1_0/authorizations
      + mehod：POST
      + 参数：
        + mobile：
          + 手机号
          + string
          + 必须
        + code:
          + 验证码
          + string
          + 必须
        + 测试帐号：
          + 18801185985
          + 246810
  + 3.0 接收响应的数据，
    + 如果登录成功，跳转到主页
      + 添加一个登录成功的提示框
    + 否则提示用户登录失败

##### 2.2.6 登录时登录按钮处理加载状态

+ 步骤：
  + 1.0 给登录添加属性 Loading
  + 2.0 当发送请求时将 Loading 设置为 true
  + 3.0 当请求响应回来时将 loading 改为 false

##### 2.2.7 添加用户阅读协议

+ 步骤：
  + 1.0 在界面中添加一个多选框&一段文本
  + 2.0 给多选框添加一个合法性验证（必须选中才能登录）
  + 3.0 点击登录按钮时也要验证多选框的合法性

##### 2.2.8 点击获取验证码验证手机号

+ 步骤：
  + 1.0 获取验证码绑定一个点击事件
  + 2.0 通过form 表单的事件：validateField 来验证手机号是否存在

##### 2.2.9 添加验证码的倒计时

+ 步骤：
  + 1.0 点击获取验证码按钮时，需要先验证手机号
  + 2.0 手机号验证成功时，需要请求服务器得到验证码（这步不做）
  + 3.0 在 60s 之内，不允许重新请求验证码
    + 当点击之后，让按钮处于禁用状态
    + 显示一个时间，用来表示验证码请求的时间间隔
    + 这个时间需要不断的减少

### 扩展

#### e1. @ 符号的作用

+ vue-cli 中为我们提供的一个路径关键字
+ 表示的是 src 目录
+ 注意：@ 表示的 src 目录，如果在要后继续添加路径时一定要加上 **'/'**

#### e2.  使用 $refs 获取 dom 元素

+ this.$refs.form
+ this.$refs['form']

#### e3. 下载第三方包的注意点

+ 如果之前用的是 cnpm , 后面改为 npm 可以会造成 node_models 中包失效
  + 一旦失效，需要删除 node_models 文件夹，重新下载

#### e4. axios 的基本使用

+ get 请求

  ```
  axios.get(url)
       .then(res => {})
       .catch(err => {})
  ```

+ post 请求

  ```
  axios.post(url, {mobile: '', code: ''})
  	.then(res => {})
  	.catch(err => {})
  ```

+ 通用的请求

  ```
  axios({
    url: '',// 请求的地址
    method: '', // 请求的方式
    data: {
      
    } 
  }).then(res => {})
  .catch(err => {})
  ```

#### e5.  定时器清除之后并不为空

+ 定时器在赋值时，只是将定时器的标识赋值给了等号左边的变量
+ 定时器被清除时，并不会清除定时器的标识